{"uid":"a327fd3a7c98a9e","name":"test_text_language_detection_services_with_no_api_key_User","fullName":"tests.test_services.test_user_services_sanity.TestUserServicesWithNoAPIKey#test_text_language_detection_services_with_no_api_key_User","historyId":"f60f8560f0f2d92ac75cacaf055c3d64","time":{"start":1771928910128,"stop":1771928910504,"duration":376},"description":"\n        User : Test Text Language Detection service with no API key\n        ","descriptionHtml":"<pre><code>    User : Test Text Language Detection service with no API key\n</code></pre>\n","status":"broken","statusMessage":"KeyError: 'code'","statusTrace":"self = <test_user_services_sanity.TestUserServicesWithNoAPIKey object at 0x7779e4b63100>\nuser_client_with_no_api_key = <utils.api_client.APIClient object at 0x7779e4132b90>\n\n    def test_text_language_detection_services_with_no_api_key_User(self, user_client_with_no_api_key):\n        \"\"\"\n        User : Test Text Language Detection service with no API key\n        \"\"\"\n        endpoint = \"/api/v1/language-detection/inference\"\n        payload = ServiceWithPayloads.text_language_detection_from_sample()\n    \n        response = user_client_with_no_api_key.post(endpoint, json=payload)\n    \n        assert response.status_code in [401, 403], (\n            f\"Expected 401/403, got {response.status_code}. Response: {response.text}\"\n        )\n    \n        data = response.json()\n        assert \"detail\" in data\n    \n        print(f\"\\n✅ USER Text Language Detection correctly blocked with no API key\")\n>       print(f\"   Error: {data['detail']['message']}, {data['detail']['code']}\")\nE       KeyError: 'code'\n\ntests/test_services/test_user_services_sanity.py:643: KeyError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1771928883593,"stop":1771928883593,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"user_token_manager","time":{"start":1771928883593,"stop":1771928887093,"duration":3500},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"user_client_with_no_api_key","time":{"start":1771928905886,"stop":1771928905886,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n        User : Test Text Language Detection service with no API key\n        ","status":"broken","statusMessage":"KeyError: 'code'","statusTrace":"self = <test_user_services_sanity.TestUserServicesWithNoAPIKey object at 0x7779e4b63100>\nuser_client_with_no_api_key = <utils.api_client.APIClient object at 0x7779e4132b90>\n\n    def test_text_language_detection_services_with_no_api_key_User(self, user_client_with_no_api_key):\n        \"\"\"\n        User : Test Text Language Detection service with no API key\n        \"\"\"\n        endpoint = \"/api/v1/language-detection/inference\"\n        payload = ServiceWithPayloads.text_language_detection_from_sample()\n    \n        response = user_client_with_no_api_key.post(endpoint, json=payload)\n    \n        assert response.status_code in [401, 403], (\n            f\"Expected 401/403, got {response.status_code}. Response: {response.text}\"\n        )\n    \n        data = response.json()\n        assert \"detail\" in data\n    \n        print(f\"\\n✅ USER Text Language Detection correctly blocked with no API key\")\n>       print(f\"   Error: {data['detail']['message']}, {data['detail']['code']}\")\nE       KeyError: 'code'\n\ntests/test_services/test_user_services_sanity.py:643: KeyError","steps":[],"attachments":[{"uid":"ec4a8d539f340e7c","name":"Request — POST","source":"ec4a8d539f340e7c.json","type":"application/json","size":1899},{"uid":"6d32bb09d2a3c8cb","name":"Response — 401","source":"6d32bb09d2a3c8cb.json","type":"application/json","size":127},{"uid":"3b9edb09c2b0ee9d","name":"stdout","source":"3b9edb09c2b0ee9d.txt","type":"text/plain","size":68}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"user_token_manager::0","time":{"start":1771928917907,"stop":1771928917908,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.test_services"},{"name":"suite","value":"test_user_services_sanity"},{"name":"subSuite","value":"TestUserServicesWithNoAPIKey"},{"name":"host","value":"TI-LAP-1094"},{"name":"thread","value":"1726549-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_services.test_user_services_sanity"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":0,"unknown":0,"total":2},"items":[{"uid":"2669eaf0d1863605","status":"broken","statusDetails":"KeyError: 'code'","time":{"start":1771914046911,"stop":1771914047378,"duration":467}}]},"tags":[]},"source":"a327fd3a7c98a9e.json","parameterValues":[]}